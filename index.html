<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Baronli" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="Baronli">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Baronli">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Baronli">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Baronli</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Baronli</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/07/Android在AndroidStudio中引用Module依赖注意事项/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/07/Android在AndroidStudio中引用Module依赖注意事项/" itemprop="url">Android在AndroidStudio中添加Module依赖的注意事项</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-07T08:20:24+08:00">
                2017-08-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>####Android在AndroidStudio中添加Module依赖的注意事项<br>我们在开发过程中常常会有一些模块需要作为依赖，或者将部分功能单独抽出作为一个library使用，在Android studio中，我们可以通过建立多个module进行实现。<br>首先我们看看作为普通module和作为library的module的区别，<br>主要在build.gradle中<br><br>app的<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'com.android.application'</span></div><div class="line">defaultConfig &#123;</div><div class="line">        applicationId <span class="string">"com.julit.elevator_maint"</span></div><div class="line">        minSdkVersion <span class="number">17</span></div><div class="line">        targetSdkVersion <span class="number">21</span></div><div class="line">        ...</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>作为library的module<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'com.android.library'</span></div><div class="line">defaultConfig &#123;</div><div class="line">        minSdkVersion <span class="number">17</span></div><div class="line">        targetSdkVersion <span class="number">21</span></div><div class="line">        ...</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>添加依赖　打开Project的Project Structure，可以看到目前项目下面有３个module（都是可以运行的module），目前选中了app（一般项目在创建时的默认module）然后我们点击右上角的Dependencies可以看到右侧有加号，点击在此我们可以添加３种类型的依赖，选择　Module Dependency<br><img src="http://img.blog.csdn.net/20170613140951848?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMDIyODQ0OA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>然后我们就成功的添加了依赖<br><br><strong>踩坑记录</strong><br><br>依照上面的过程，我们可以很容易地给主程序添加依赖，但是存在一些坑<br></p>
<p>我们都会遇到的一些问题，在此我将自己的一些遇到的一些问题的解决办法进行记录和说明，希望减少这种问题的遇到。</p>
<p>######（1）Manifest merger failed with multiple errors<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Error:Execution failed <span class="keyword">for</span> task <span class="string">':app:processDebugManifest'</span>.</div><div class="line">&gt; Manifest merger failed with multiple errors, see logs</div></pre></td></tr></table></figure></p>
<p><strong>原因：</strong><br>AS的Gradle插件默认会启用Manifest Merger Tool，如果Library项目中也定义了与主项目相同的属性（例如默认生成的Android:icon和android:theme），则此时会合并失败，并报上面的错误。<br><br>或者是因为<br>app’s minSdk is higher than any library’s minSdk.<br>要求app’s minSdk &gt;= libraries minSdk<br><br><br>解决方法有以下2种：<br><br>方法1：在Manifest.xml的application标签下添加tools:replace=”android:icon, android:theme”（多个属性用,隔开，并且在manifest根标签上加入xmlns:tools=”<a href="http://schemas.android.com/tools&quot;）" target="_blank" rel="external">http://schemas.android.com/tools&quot;）</a><br><br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;manifest xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    xmlns:tools=<span class="string">"http://schemas.android.com/tools"</span>  <span class="comment">// add tools line here </span></div><div class="line">    <span class="keyword">package</span>=<span class="string">"yourpackage"</span>&gt;</div><div class="line">    &lt;application</div><div class="line">        android:allowBackup=<span class="string">"true"</span></div><div class="line">        android:icon=<span class="string">"@mipmap/ic_launcher"</span></div><div class="line">        android:label=<span class="string">"@string/app_name"</span></div><div class="line">        android:supportsRtl=<span class="string">"true"</span></div><div class="line">        android:theme=<span class="string">"@style/AppTheme"</span></div><div class="line">        tools:replace=<span class="string">"android:icon"</span>&gt;  </div><div class="line">.....</div><div class="line">&lt;/application&gt;</div><div class="line">&lt;/manifest&gt;</div></pre></td></tr></table></figure></p>
<p>方法2：在build.gradle根标签上加上useOldManifestMerger true,但是我们在使用这种方法时有可能会爆出下面的错误<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Error:(<span class="number">4</span>, <span class="number">0</span>) Gradle DSL method not found: <span class="string">'useOldManifestMerger()'</span></div><div class="line">Possible causes:&lt;ul&gt;&lt;li&gt;The project <span class="string">'JuliAPP_AS'</span> may be using a version of the Android Gradle plug-<span class="function">in that does not contain the <span class="title">method</span> <span class="params">(e.g. <span class="string">'testCompile'</span> was added in <span class="number">1.1</span><span class="number">.0</span>)</span>.</span></div><div class="line">&lt;a href="fixGradleElements"&gt;Upgrade plugin to version 2.3.2 and sync project&lt;/a&gt;&lt;/li&gt;&lt;li&gt;The project 'JuliAPP_AS' may be using a version of Gradle that does not contain the method.</div><div class="line">&lt;a href="open.wrapper.file"&gt;Open Gradle wrapper file&lt;/a&gt;&lt;/li&gt;&lt;li&gt;The build file may be missing a Gradle plugin.</div><div class="line">&lt;a href="apply.gradle.plugin"&gt;Apply Gradle plugin&lt;/a&gt;&lt;/li&gt;</div><div class="line"></div><div class="line">Error:(<span class="number">10</span>, <span class="number">0</span>) <span class="function">Could not find method <span class="title">useOldManifestMerger</span><span class="params">()</span> <span class="keyword">for</span> arguments [<span class="keyword">true</span>] on object of type com.android.build.gradle.AppExtension.</span></div></pre></td></tr></table></figure></p>
<p>######（2）APP安装时出现2个图标<br>原因是我们在AndroidMamifest.xml中的<application的标签依然存在重复的属性，我们在build.gradle中将application改成了library但是此处如果没改会导致2个图标。 <figure="" class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line"><span class="tag">    <span class="attr">package</span>=<span class="string">"com.juli.commonlibrary"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">application</span>  <span class="attr">android:allowBackup</span>=<span class="string">"true"</span> <span class="attr">android:icon</span>=<span class="string">"@mipmap/ic_launcher"</span></span></div><div class="line"><span class="tag">         <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span> <span class="attr">android:supportsRtl</span>=<span class="string">"true"</span> &gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">"com.juli.commonlibrary.PhotoUtil.ImageGetActivity"</span>&gt;</span></div><div class="line">             <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">                 <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.MAIN"</span> /&gt;</span></div><div class="line">                 <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.LAUNCHER"</span> /&gt;</span></div><div class="line">             <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line">         <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">application</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></div></pre></td></tr></table></application的标签依然存在重复的属性，我们在build.gradle中将application改成了library但是此处如果没改会导致2个图标。></p>
<p>修改成<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line"><span class="tag">    <span class="attr">package</span>=<span class="string">"com.juli.commonlibrary"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">application</span>  <span class="attr">android:allowBackup</span>=<span class="string">"true"</span> <span class="attr">android:supportsRtl</span>=<span class="string">"true"</span> &gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">"com.juli.commonlibrary.PhotoUtil.ImageGetActivity"</span>/&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">application</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>但是在使用第二种方法时也有可能爆出上面的问题，</p>
<p>######（３）报名相同导致冲突　A library uses the same package as this project<br><strong>解决方法</strong>在Build.gradle中添加enforceUniquePackageName = false，如下<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">android &#123;</div><div class="line">    compileSdkVersion <span class="number">23</span></div><div class="line">    buildToolsVersion <span class="string">"23.0.1"</span></div><div class="line">    enforceUniquePackageName = <span class="keyword">false</span></div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>####Android studio其他使用注意事项（借鉴）</p>
<p>1、每次保存的时候，每行多余的空格和TAB会被自动删除（例如结尾、空行的多余空格或TAB）<br>特别是每次准备提交SVN，Review代码时候你就蛋疼了，显示一堆不相关的更改，看的眼花。<br><br><strong>解决方法：</strong><br>Settings-&gt;IDE Settings-&gt;Editor-&gt;Other-&gt;Strip trailing spaces on Save-&gt;None<br><br><br><br>2、Library Project里面的BuildConfig.DEBUG永远都是false。这是Android Studio的一个已知问题，某Google的攻城狮说，Library projects目前只会生成release的包。<br>Issue 52962: <a href="https://code.google.com/p/android/issues/detail?id=52962" target="_blank" rel="external">https://code.google.com/p/android/issues/detail?id=52962</a><br><br><strong>解决方法：</strong>（某Google的攻城狮推荐的方法）<br>Workaround: instaed of BuildConfig.DEBUG create another boolean variable at lib-project’s e.g. BuildConfig.RELEASE and link it with application’s buildType.<br><a href="https://gist.github.com/almozavr/d59e770d2a6386061fcb" target="_blank" rel="external">https://gist.github.com/almozavr/d59e770d2a6386061fcb</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/07/Java运算注意事项/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/07/Java运算注意事项/" itemprop="url">Java运算注意事项</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-07T08:20:12+08:00">
                2017-08-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#####java 两个整数相除保留两位小数</p>
<p>java中，当两个整数相除时，由于小数点以后的数字会被截断，运算结果将为整数，此时若希望得到运算结果为浮点数，必须将两整数其一或是两者都强制转换为浮点数。<br>例如：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">(<span class="keyword">float</span>)a/b <span class="comment">// 将整数其中一个强制转换为浮点数，再与另一个整数相除</span></div><div class="line">a/(<span class="keyword">float</span>)b</div><div class="line">(<span class="keyword">float</span>)a/(<span class="keyword">float</span>)b <span class="comment">// 将两个整数同时强制转换为浮点数后再相除</span></div><div class="line">Java代码  </div><div class="line"><span class="keyword">float</span> num= (<span class="keyword">float</span>)<span class="number">2</span>/<span class="number">3</span>;   </div><div class="line">DecimalFormat df = <span class="keyword">new</span> DecimalFormat(<span class="string">"0.00"</span>);<span class="comment">//格式化小数   </span></div><div class="line">String s = df.format(num);<span class="comment">//返回的是String类型 </span></div><div class="line"><span class="keyword">double</span> data=<span class="number">5</span>/<span class="number">3</span>;　　<span class="comment">//data =1</span></div><div class="line"><span class="keyword">float</span> data2=<span class="number">5</span>/<span class="number">3</span>;  <span class="comment">//data2=1</span></div><div class="line"></div><div class="line"><span class="keyword">double</span> data3=(<span class="keyword">double</span>) <span class="number">5</span>/<span class="number">3</span> <span class="comment">//data3=1.6666666666666667</span></div><div class="line"><span class="keyword">double</span> data3= <span class="number">5</span>/<span class="number">3</span>d        <span class="comment">//data3=1.6666666666666667</span></div><div class="line"><span class="keyword">float</span> data4=(<span class="keyword">float</span>) <span class="number">5</span>/<span class="number">3</span>   <span class="comment">//data4=1.6666666</span></div><div class="line"><span class="keyword">float</span> data5= <span class="number">5</span>/<span class="number">3f</span>         <span class="comment">//data5=1.6666666</span></div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/06/Git操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/06/Git操作/" itemprop="url">Git命令详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-06T18:34:07+08:00">
                2017-08-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这个是使用nano进行编辑提交的页面，退出方法为：</p>
<p>Ctrl + X然后输入y再然后回车，就可以退出了</p>
<p>如果你想把默认编辑器换成别的：</p>
<p>在GIT配置中设置 core.editor: git config –global core.editor “vim”</p>
<p>参考：</p>
<p><a href="http://stackoverflow.com/questions/2596805/how-do-i-make-git-use-the-editor-of-my-choice-for-commits" target="_blank" rel="external">http://stackoverflow.com/questions/2596805/how-do-i-make-git-use-the-editor-of-my-choice-for-commits</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/06/Java泛型详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/06/Java泛型详解/" itemprop="url">Java运算注意事项</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-06T18:33:13+08:00">
                2017-08-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>###Java泛型<br>在Java开发中，泛型是我们非常频繁使用的知识，它常常与集合一起结伴。<br>泛型是在ＪＤＫ１．５出现的。<br><br><strong>为什么需要它？</strong><br><br>编译期检查，参数化.<br>我们以集合Ｌｉｓｔ为例<br><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">List             mList;</div><div class="line">List&lt;String&gt;     mListByString ;</div></pre></td></tr></table></figure></p>
<p>一个是原始的集合Ｌｉｓｔ，一个是泛型化的Ｌｉｓｔ<br>（泛型是在ＪＤＫ１．５出现，官方推荐从那时起尽量使用泛型化的集合，但原生的集合依然可以使用Ｌｉｓｔ、Ｓｅｔ，主要是为了向前兼容，业界已经存在了大量使用原生集合的代码）<br><br>那么上面的两种不同格式有何区别？<br><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mList.add(<span class="string">"123"</span>);   　　　　　<span class="comment">//正常</span></div><div class="line">mList.add(<span class="number">123</span>);   　　　　　　<span class="comment">//正常</span></div><div class="line"></div><div class="line">mListByString.add(<span class="string">"123"</span>);　　<span class="comment">//正常</span></div><div class="line">mListByString.add(<span class="number">123</span>);     <span class="comment">//编译报错</span></div></pre></td></tr></table></figure></p>
<p>上面我分别往mList和mListByString添加一个String和一个int,添加了２个类型不同的值，<br><br>当然正常情况下，我们可能只希望添加String类型的值，但无意中就像样例中一样添加了一个ｉｎｔ类型的值。其中原生Ｌｉｓt编译正常，而以String 为参数的泛型List则在编译时报错。</p>
<p>下面是我们在其他地方使用上面两个Ｌｉｓｔ<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">String name1=mList.get(<span class="number">0</span>);</div><div class="line">String name2=mList.get(<span class="number">1</span>);</div><div class="line"></div><div class="line">String name3=mListByString.get(<span class="number">0</span>);</div><div class="line">String name4=mListByString.get(<span class="number">1</span>);</div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/06/RecyclerView高度适应问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/06/RecyclerView高度适应问题/" itemprop="url">RecyclerView高度适应问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-06T00:00:00+08:00">
                2017-08-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>RecyclerView高度适应问题</p>
<p>#####ItemView大小固定<br>ItemView大小固定的情况下，根据ItemView的宽高调整recyclerview的宽高，以达到recyclerview刚好显示N行/列数据的目的：<br>原理是重写LayoutManager的onMeasure方法，计算itemview的宽高，进而计算出recyclerview的宽高。<br>比如，一个垂直列表，希望recyclerview刚好显示三行，这样写：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">recyclerView.setLayoutManager(<span class="keyword">new</span> LinearLayoutManager(<span class="keyword">this</span>) &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(RecyclerView.Recycler recycler, RecyclerView.State state, <span class="keyword">int</span> widthSpec, <span class="keyword">int</span> heightSpec)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (getChildCount() &gt; <span class="number">0</span>) &#123;</div><div class="line">            View firstChildView = recycler.getViewForPosition(<span class="number">0</span>);</div><div class="line">            measureChild(firstChildView, widthSpec, heightSpec);</div><div class="line">            setMeasuredDimension(View.MeasureSpec.getSize(widthSpec), firstChildView.getMeasuredHeight()*<span class="number">3</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">super</span>.onMeasure(recycler, state, widthSpec, heightSpec);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>#####ItemView大小不固定</p>
<p>#####ItemView适应RecyclerView<br>RecyclerView大小固定的情况下，根据RecyclerView的宽高设置ItemView的宽高，以达到recyclerview刚好显示N行/列数据的目的：<br>在原理是先计算出RecyclerView的宽高，然后在Adapter的onCreateViewHolder中设置view的高度：<br>比如一个垂直列表，希望recyclerview刚好显示三行，这样写：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="keyword">public</span> ClubServiceAdapter.<span class="function">ServiceItemViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> viewType)</span> </span>&#123;</div><div class="line">    View view = LayoutInflater.from(parent.getContext()).inflate(布局文件, parent, <span class="keyword">false</span>);</div><div class="line">    view.getLayoutParams().height = mRecyclerViewHeight/<span class="number">3</span>;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ServiceItemViewHolder(view);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>#####设置ItemView的间隔高宽</p>
<p>重写ItemDecoration的getItemOffsets函数即可：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">recycleview.addItemDecoration(<span class="keyword">new</span> RecyclerView.ItemDecoration() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getItemOffsets</span><span class="params">(Rect outRect, View view, RecyclerView parent, RecyclerView.State state)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.getItemOffsets(outRect, view, parent, state);</div><div class="line">        outRect.set(<span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>);<span class="comment">//设置itemView中内容相对边框左，上，右，下距离</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/04/FragmentTransaction使用详细解析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/04/FragmentTransaction使用详细解析/" itemprop="url">Android的Fragment详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-04T00:00:00+08:00">
                2017-08-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>###FragmentTransaction使用详细解析</p>
<p>####先来一个完整操作Fragment的例子<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mFragmentManager = getSupportFragmentManager();</div><div class="line">mFragmentTransaction = mFragmentManager.beginTransaction();</div><div class="line">mFragmentTransaction.add(R.id.id_main_content,fragment1);</div><div class="line">mFragmentTransaction.commit();</div></pre></td></tr></table></figure></p>
<p>我们是通过FragmentManager来对Fragment进行管理，其中API3.0之后可以在Activity通过getFragmentManager方法获取到FragmentManager实例，当然也可以通过Support包的getSupportFragmentManager方法获取。<br>其中我们是通过FragmentTransaction(事物)来进行一次完整的针对Fragment操作的（添加、替换、删除Fragment）.</p>
<p>######问题–如果多次执行add()方法会怎么样子？<br>导致重叠，如下图片<br><img src="/images/两个fragment叠加.png" alt="样例"></p>
<p>####添加、替换、删除、隐藏、获取Fragment</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/03/开发错误集锦/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/03/开发错误集锦/" itemprop="url">Android开发错误集锦</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-03T21:03:24+08:00">
                2017-08-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>###Android开发错误集锦</p>
<p>#####１、NULLPoint空指针<br>Activity生命周期结束，导致其中的持有Actiｖity引用的定时任务的引用变为ｎｕｌｌ。</p>
<p>####2、ClassCastException<br>多出现在强制类型转变上</p>
<p>#####３、命令行启动avd报错<br>在tools的目录下   ./emulator -netdelay none -netspeed full -avd Nexus23<br>可能报错   </p>
<p>######./emulator -netdelay none -netspeed full -avd api25</p>
<p>emulator: ERROR: This AVD’s configuration is missing a kernel file! Please ensure the file “kernel-ranchu” is in the same location as your system image.<br>emulator: ERROR: ANDROID_SDK_ROOT is undefined</p>
<p>解决方法 ：给root添加<br>export PATH=/home/stormbaron/android-sdk-linux/platform-tools/:$PATH</p>
<p>######新的问题<br> libGL error: unable to load driver: i965_dri.so<br>libGL error: driver pointer missing<br>libGL error: failed to load driver: i965<br>libGL error: unable to load driver: i965_dri.so<br>libGL error: driver pointer missing<br>libGL error: failed to load driver: i965<br>libGL error: unable to load driver: swrast_dri.so<br>libGL error: failed to load driver: swrast<br>X Error of failed request:  GLXBadContext<br>  Major opcode of failed request:  155 (GLX)<br>  Minor opcode of failed request:  6 (X_GLXIsDirect)<br>  Serial number of failed request:  55<br>  Current serial number in output stream:  54<br>emulator: ERROR: This AVD’s configuration is missing a kernel file! Please ensure the file “kernel-ranchu” is in the same location as your system image.<br>emulator: ERROR: ANDROID_SDK_ROOT is undefined<br>解决方法<br> Rather than launching the emulator from Android Studio, open the terminal and cd into the tools directory withing your Android SDK directory - mine is ~/Android/Sdk/tools. From there run the command:<br></p>
<p>LD_PRELOAD=’/usr/$LIB/libstdc++.so.6’ DISPLAY=:0 ./emulator -avd <insert avd="" name="" here="">    </insert></p>
<p>####４、Spinner点击item无反应<br>原因：adapter的list来源于异步线程执行的网络请求，可能导致adpter异常，将list换成一个固定的列表值后正常。</p>
<p>####５、The error of install apk<br><em>INSTALL_FAILED_NO_MATCHING_ABIS</em>  is when you are trying to install an app that has native libraries and it doesn’t have a native library for your cpu architecture. For example if you compiled an app for armv7 and are trying to install it on an emulator that uses the Intel architecture instead it will not work.　　</p>
<p>####６、java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState</p>
<p>###Android Studio</p>
<p>####1、多个Module依赖了相同的第三方包，在打包编译时会爆出重复的错误。<br>涉及compile,provided,apk之间的区别，compile是指该第三方包始终被需要（编译、打包、发布、测试）<br>provided是指该第三方包编译时需要，不会被打包进apk中</p>
<p>####2、java.lang.SecurityException: MODE_WORLD_READABLE no longer supported<br>在新版本7.0的Android API中在进行getSharedPreferences时不再支持<br>4中模式：</p>
<p>四种模式，分别为：<br>Context.MODE_PRIVATE    = 0<br>Context.MODE_APPEND    = 32768<br>Context.MODE_WORLD_READABLE = 1<br>Context.MODE_WORLD_WRITEABLE = 2<br>7.0后<br>代码调用，存放在data/data/包名/xxx<br>目录下的文件设置<br>Context.MODE_WORLD_READABLE = 1<br>Context.MODE_WORLD_WRITEABLE = 2<br>会抛安全异常！！！</p>
<p>改用<br>MODE_PRIVATE</p>
<p>####3、android.database.sqlite.SQLiteException: table videoinfo_table already exists (code 1): , while compiling: create table videoinfo_table(_id integer primary key autoincrement,title text,path text,imagePath text,size real,position real,duration real)</p>
<p>####4、Android studio 打包<br>Error:(11) Error: “main_title” is not translated in “en” (English) [MissingTranslation]<br>Error:Execution failed for task ‘:app:lintVitalRelease’.</p>
<blockquote>
<p>Lint found fatal errors while assembling a release target.<br>  To proceed, either fix the issues identified by lint, or modify your build script as follows:<br>  …<br>  android {<br>      lintOptions {<br>          checkReleaseBuilds false<br>          // Or, if you prefer, you can continue to check for errors in release builds,<br>          // but continue the build even when errors are found:<br>          abortOnError false<br>      }<br>  }<br>  …<br>在打包的时候String.xml 中出现了问题<br>在build.gradle<br>   //添加如下配置就ok了<br>    lintOptions {<br>        checkReleaseBuilds false<br>        abortOnError false<br>    }</p>
</blockquote>
<p>####５、Adb 安装APK时报错<br>打开cmd 跳转到adb.exe所在的目录文件夹下 （D:\android-sdk-windows\platform-tools）：<br>adb install  abc.apk(如果此apk没有在当前目录下，还需要带上绝对路径，否则无法找到此apk)<br>这些错误基本是在 cmd 命令行安装时遇到的。</p>
<p>INSTALL_FAILED_ALREADY_EXISTS                 程序已经存在<br>INSTALL_FAILED_INVALID_APK                     无效的APK<br>INSTALL_FAILED_INVALID_URI                     无效的链接<br>INSTALL_FAILED_INSUFFICIENT_STORAGE          没有足够的存储空间<br>INSTALL_FAILED_DUPLICATE_PACKAGE             已存在同名程序<br>INSTALL_FAILED_NO_SHARED_USER                要求的共享用户不存在<br>INSTALL_FAILED_UPDATE_INCOMPATIBLE           版本不能共存<br>INSTALL_FAILED_SHARED_USER_INCOMPATIBLE     需求的共享用户签名错误<br>INSTALL_FAILED_MISSING_SHARED_LIBRARY       需求的共享库已丢失<br>INSTALL_FAILED_REPLACE_COULDNT_DELETE      需求的共享库无效<br>INSTALL_FAILED_DEXOPT                          dex优化验证失败<br>INSTALL_FAILED_OLDER_SDK                      系统版本过旧<br>INSTALL_FAILED_CONFLICTING_PROVIDER          存在同名的内容提供者<br>INSTALL_FAILED_NEWER_SDK                      系统版本过新<br>INSTALL_FAILED_TEST_ONLY                      调用者不被允许测试的测试程序<br>INSTALL_FAILED_CPU_ABI_INCOMPATIBLE         包含的本机代码不兼容<br>CPU_ABIINSTALL_FAILED_MISSING_FEATURE       使用了一个无效的特性<br>INSTALL_FAILED_CONTAINER_ERROR              SD卡访问失败<br>INSTALL_FAILED_INVALID_INSTALL_LOCATION     无效的安装路径<br>INSTALL_FAILED_MEDIA_UNAVAILABLE            SD卡不存在<br>INSTALL_FAILED_INTERNAL_ERROR                系统问题导致安装失败<br>DEFAULT                                          未知错误</p>
<p>###Fragment相关</p>
<p>####(1)java.lang.IllegalStateException异常产生的原因及解决办法<br>Can not perform this action after onSaveInstanceState<br><br>错误类型大致为以下几种：<br>java.lang.IllegalStateException：Cannot   forward   a   response   that   is   already   committed <br><br>IllegalStateException：response already commited <br><br>IllegalStateException：getOutputStream() has already been called for this request<br>…..<br><br>IllegalStateException: Can not perform this action after onSaveInstanceState：<br><br><strong>解决办法</strong>：onSaveInstanceState方法是在该Activity即将被销毁前调用，来保存Activity数据的，如果在保存完状态后<br>再给它添加Fragment就会出错。解决办法就是把commit（）方法替换成 commitAllowingStateLoss()</p>
<p>#####(２)java.lang.IllegalStateException<br>Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 1 column 37 path $.data<br><br>错误原因：该异常是由于服务器错误返回的JSON字符串和服务器正常下时返回的JSON字符串结构不同,导致利用Gson解析的时候报了一个异常:本该去解析集合却强制去解析对象所致.<br>解决办法:在使用Gson解析JSON时try cash一下,不报错按照正常逻辑继续解析,报异常则处理为请求失败逻辑即可.</p>
<p>#####(3)FATAL EXCEPTION: main Process: com.julit.elevator_maint, PID: 2158<br>java.lang.RuntimeException: Unable to instantiate application<br> com.juli.elevator_ivms.app.DemoApp: java.lang.ClassNotFoundException: Didn’t find class “com.juli.elevator_ivms.app.DemoApp” on path: DexPathList[[zip file “/data/app/com.julit.elevator_maint-1/base.apk”],nativeLibraryDirectories=[/data/app/com.julit.elevator_maint-1/lib/arm, /data/app/com.julit.elevator_maint-1/base.apk!/lib/armeabi-v7a, /vendor/lib, /system/lib]]</p>
<p>#####(4)错误：Error:Execution failed for task ‘:app:mergeDebugResources’.</p>
<blockquote>
<p>Some file crunching failed, see logs for details</p>
</blockquote>
<p>原因：这是图片格式错了</p>
<p>解决：不要把图片的后缀直接修改为.png</p>
<p>######(５)ERROR: 9-patch image<br>项目中有9-patch用ant脚本来编译的时候有错，如果直接用eclipse打包就没有问题<br> ERROR: 9-patch image /home/stormbaron/work/GitProject/Company/JuliSale_AS/app/src/main/res/drawable-hdpi/search_bar_edit_pressed.9.png malformed.<br>AAPT:        Frame pixels must be either solid or transparent (not intermediate alphas).<br>AAPT:        Found at pixel #15 along top edge.</p>
<p>解决方案　：那张图有问题，.9.png图，顶部和左侧必须要设置拉伸区域（右侧和底部可以不设置）否则会报错</p>
<p>######(６)<br> Execution failed for task ‘:app:transformResourcesWithMergeJavaResForDebug’.</p>
<blockquote>
<p>com.android.build.api.transform.TransformException: com.android.builder.packaging.DuplicateFileException: Duplicate files copied in APK META-INF/LICENSE<br>      File1: /home/stormbaron/work/GitProject/Company/JuliSale_AS/app/libs/httpclient-4.3.1.jar<br>      File2: /home/stormbaron/work/GitProject/Company/JuliSale_AS/app/libs/httpcore-4.3.jar<br>貌似说两个包里面的文件重复了还是怎么的，谷歌了一番之后据说应该是 android studio 自身的bug<br>解决办法：<br>打开项目下面的 build.gradle 文件，在 android 代码块中添加下面代码<br>[sql] view plain copy<br>android {<br>    packagingOptions {<br>        exclude ‘META-INF/DEPENDENCIES’<br>        exclude ‘META-INF/NOTICE’<br>        exclude ‘META-INF/LICENSE’<br>        exclude ‘META-INF/LICENSE.txt’<br>        exclude ‘META-INF/NOTICE.txt’<br>    }<br>}  </p>
</blockquote>
<p>将这些文件全部排出掉就ok了</p>
<p>######(７)git init 产生的目录解释<br>error: src refspec master does not match any.<br>引起该错误的原因是，目录中没有文件，空目录是不能提交上去的</p>
<p>####网络权限问题（6.0之后的申请）<br>所有需要使用的权限都必须在Mainfest中进行申明，6.0以后的动态获取，只是针对你所申明的权限做的一个授权，如果你在Mainfest中没有进行申明的话，动态权限的框不会显示</p>
<p>####Java Method Call Expected<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">incListener</span></span>&#123;&#125;</div><div class="line"><span class="comment">//报错的使用</span></div><div class="line">increase.addActionListener(incListener());</div><div class="line"><span class="comment">//正确的使用</span></div><div class="line">increase.addActionListener(<span class="keyword">new</span> incListener());</div></pre></td></tr></table></figure></p>
<p>#####Android studio在使用打包时（buildToolsVersion）<br>Error:In <declare-styleable> ConstraintSet, unable to find attribute android:elevation<br>　　　这个问题主要和api的版本问题有关(原本是20报错，改成21后正常)<br>    compileSdkVersion 21<br>    buildToolsVersion “25.0.1”</declare-styleable></p>
<p>####Activity与Fragment需要相匹配</p>
<p>android.view.InflateException: Binary XML file line #9: Error inflating class fragment</p>
<p>当我们用的Activity时</p>
<p>应当  import android.app.Fragment.</p>
<p>当我们用的FragmentActivity 或者appcompatactivity(待验证)</p>
<p>应当 import android.support.v4.app.Fragment</p>
<p>否则在Activity是无法识别android.support.v4.app.Fragment的</p>
<p>####Fragment导致的空指针<br>java.lang.NullPointerException</p>
<p>Attempt to write to field ‘int android.support.v4.app.Fragment.mNextAnim’ on a null object reference</p>
<p>一个原因导致：在fragment为null的时候show或hide或remove了。所以在对Fragment进行操作前一定要进行判断。</p>
<p>#####Gson错误<br>java.lang.IllegalStateException: Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 1 column 2 path $<br>分析原因：在使用解析之前要先分析后台返回的是一个object还是一个array</p>
<p>#####Retrofit错误<br> java.lang.IllegalStateException: Already executed.<br> at retrofit2.OkHttpCall.enqueue(OkHttpCall.java:84)<br><br>原因：多次执行call.enqueue</p>
<p>java.lang.IllegalArgumentException: baseUrl must end in /: <a href="http://erp.joylive.com:10030/service.json" target="_blank" rel="external">http://erp.joylive.com:10030/service.json</a></p>
<p>java.lang.IllegalArgumentException: Unable to create call adapter for interface retrofit2.Call<br>=0  WEBRESENDSEGS=0  WEBRECVSEGS=1  WEBERRSEGS=0  WEBOUTRSTS=0  WEBESTABLISRST=0  WEBRTTDURATION=0  WEBRTTSEGS=0  WEBSNDDUPACKS=0  suckTimes=0 recovage_times=5]</p>
<p>####Android页面错误<br>android.view.WindowLeaked: Activity com.suda.julisale.utils.ImageGetActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{4333be18 V.E….. R……D 0,0-684,192} that was originally added here</p>
<p>多次调用Dialog的hide</p>
<p>####调用Intent时，需要显性声明，否则报错（5.0系统以后）<br>java.lang.IllegalArgumentException:Service Intent must be explicit: Intent { act=com.easi.mobile.locator.MobileLocatorService }</p>
<p>public class ShutdownBroadcastReceiver extends BroadcastReceiver {  </p>
<pre><code>private static final String ACTION_SHUTDOWN = &quot;android.intent.action.ACTION_SHUTDOWN&quot;;  

@Override  
public void onReceive(Context context, Intent intent) {

    if (intent.getAction().equals(ACTION_SHUTDOWN)) {


        SharedPreferences sp = context.getSharedPreferences(&quot;MobileLocator&quot;, Context.MODE_PRIVATE);  
        sp.edit().putString(&quot;instruct&quot;, &quot;exit&quot;).commit();  

        context.stopService(new Intent(PushGpsInfoService.ACTION_MOBILE_LOCATOR_SERVICE));
    }  

}  
</code></pre><p>}  </p>
<h4 id="Drawerlayout在代码中控制打开和关闭时报错"><a href="#Drawerlayout在代码中控制打开和关闭时报错" class="headerlink" title="Drawerlayout在代码中控制打开和关闭时报错"></a>Drawerlayout在代码中控制打开和关闭时报错</h4><p>   java.lang.IllegalArgumentException: No drawer view found with gravity LEFT<br>   解决办法:<br>   除了上面那段代码以外，还要在xml中，抽屉部分中增加：</p>
<p> android:layout_gravity=”left”</p>
<p>####org.json.JSONException: End of input at character 0 of<br>Json在获取时，对应是空值</p>
<h4 id="Glide错误"><a href="#Glide错误" class="headerlink" title="Glide错误"></a>Glide错误</h4><p>E/dex2oat: Failed to create oat file: /data/dalvik-cache/x86/data@app@com.example.stormbaron.agank-2@split_lib_dependencies_apk.apk@classes.dex: Permission denied</p>
<p>####Rxjava 使用时可能遇到的问题　Duplicate files copied in APK META-INF/rxjava.properties<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Error:Execution failed for task ':app:transformResourcesWithMergeJavaResForDebug'. &gt; com.android.build.api.transform.TransformException: com.android.builder.packaging.DuplicateFileException: Duplicate files copied in APK META-INF/rxjava.properties     File1: /home/stormbaron/.android/build-cache/79c3bd52eead62f9651d4f1445d26e97af7ad05b/output/jars/classes.jar     File2: /home/stormbaron/work/gradle-3.4/caches/modules-2/files-2.1/io.reactivex/rxjava/1.0.14/898f9ab61e2a23afd615f0b0389478bec86f49f9/rxjava-1.0.14.jar</div></pre></td></tr></table></figure></p>
<p>可用的解决方法：<br>  packagingOptions {<br>        exclude ‘META-INF/rxjava.properties’<br>    }</p>
<h4 id="当Glide正在对某个View进行操作时，如果进行setTag操作会报错"><a href="#当Glide正在对某个View进行操作时，如果进行setTag操作会报错" class="headerlink" title="当Glide正在对某个View进行操作时，如果进行setTag操作会报错"></a>当Glide正在对某个View进行操作时，如果进行setTag操作会报错</h4><p>java.lang.IllegalArgumentException: You must not call setTag() on a view Glide is targeting</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/03/Android测试/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/03/Android测试/" itemprop="url">Android测试</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-03T15:19:35+08:00">
                2017-08-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>###Android测试<br>测试在开发中的地位无需多言，在Android开发中，我们最离不开的应该是　单元测试，同时我们也希望对UI页面的各类点击事件进行测试。</p>
<p>####单元测试　（JUnit）<br>JUnit是我们在进行单元测试常用的测试框架，使用方式<br>首先我们需要添加一下依赖，<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">testCompile <span class="string">'junit:junit:4.12'</span></div></pre></td></tr></table></figure></p>
<p>在开始编写junit测试之前，需要为其新建一个目录。通常，这个会被叫做test，会和main文件夹平级。在Android studio创建项目时一般会自动生成相关目录。<br><img src="./images/testPath.png" alt="样例"></p>
<p>#####编写测试样例<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> junit.framework.Assert.assertEquals;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExampleUnitTest</span> </span>&#123;</div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addition_isCorrect</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        assertEquals(<span class="number">8</span>, <span class="number">2</span> * <span class="number">4</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>#####运行测试<br>直接在Android studio中右击项目，然后点击　“Run AllTests”就可以运行，运行结果如下:</p>
<p>######代码运行正常<br><img src="./images/testExample2.png" alt="样例"></p>
<p>######代码出现Ｂug<br><img src="./images/testExample3.png" alt="样例"></p>
<p>####关联Android sdk代码(Robolectric)</p>
<p>####功能测试(Espresso)</p>
<p>注意：功能测试需要放在AndroidTest目录下，下面是测试用例：</p>
<p>####测试覆盖率</p>
<p>一旦你在你的项目中使用到了测试，那么你肯定想知道你的测试覆盖量。很真实，依然有很多测试覆盖率工具，我推荐的是Jacoco。</p>
<p>Jacoco</p>
<p>####代码分析(Android Lint)</p>
<p>####检测工具LeakCanry 和BlockCanary</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/03/MySql命令/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/03/MySql命令/" itemprop="url">Linux终端操作MySQL常用命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-03T14:22:44+08:00">
                2017-08-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a> 
<p> Linux终端操作MySQL常用命令<br>1.终端启动 MySQL：/etc/init.d/mysql start</p>
<p> 2.登录 MySQL：mysql -uroot -p (用 root 账户登录),然后输入密码 </p>
<p>3.查看所有的数据库名字：show databases; </p>
<p>4.选择一个数据库操作： use database_name; </p>
<p>5.查看当前数据库下所有的表名：show tables; </p>
<p>6.创建一个数据库：create database database_name; </p>
<p>7.删除一个数据库：drop database database_name; </p>
<p>8.创建一个表: create table mytest( uid bigint(20) not null primary key, uname varchar(20) not null); </p>
<p>9.删除一个表: drop table mytest; </p>
<p>10.SQL 插入语句：insert into table_name(col1,col2) values(value1,value2); </p>
<p>11.SQL 更新语句：update table_name set col1=’value1’,col2=’value2’ where where_definition; </p>
<p>12.SQL 查询语句：select * from table_name where…….</p>
<p>13.SQL 删除语句：delete from table_name where… </p>
<p>14.增加表结构的字段：alert table table_name add column field1 date ,add column field2 time… </p>
<p>15.删除表结构的字段：alert table table_name drop field1; </p>
<p>16.查看表的结构：show columns from table_name; </p>
<p>17.limit 的使用：select * from table_name limit 3;   //每页只显示 3 行 </p>
<p>select * from table_name limit 3,4;   //从查询结果的第三个开始，显示四项结果。 此处可很好的用来作分页处理。 </p>
<p>18.对查询结果进行排序: select * from table_name order by field1,orderby field2;多重排序 </p>
<p>19.退出 MySQL:exit; </p>
<p>20.删除表中所有数据： truncate table 数据表名称 （不可恢复） Linux终端操作MySQL常用命令<br>2015-09-20 12:29 6368人阅读 评论(1) 收藏 举报<br> 分类： Linux（3）<br>1.终端启动 MySQL：/etc/init.d/mysql start</p>
<p> 2.登录 MySQL：mysql -uroot -p (用 root 账户登录),然后输入密码 </p>
<p>3.查看所有的数据库名字：show databases; </p>
<p>4.选择一个数据库操作： use database_name; </p>
<p>5.查看当前数据库下所有的表名：show tables; </p>
<p>6.创建一个数据库：create database database_name; </p>
<p>7.删除一个数据库：drop database database_name; </p>
<p>8.创建一个表: create table mytest( uid bigint(20) not null primary key, uname varchar(20) not null); </p>
<p>9.删除一个表: drop table mytest; </p>
<p>10.SQL 插入语句：insert into table_name(col1,col2) values(value1,value2); </p>
<p>11.SQL 更新语句：update table_name set col1=’value1’,col2=’value2’ where where_definition; </p>
<p>12.SQL 查询语句：select * from table_name where…….</p>
<p>13.SQL 删除语句：delete from table_name where… </p>
<p>14.增加表结构的字段：alert table table_name add column field1 date ,add column field2 time… </p>
<p>15.删除表结构的字段：alert table table_name drop field1; </p>
<p>16.查看表的结构：show columns from table_name; </p>
<p>17.limit 的使用：select * from table_name limit 3;   //每页只显示 3 行 </p>
<p>select * from table_name limit 3,4;   //从查询结果的第三个开始，显示四项结果。 此处可很好的用来作分页处理。 </p>
<p>18.对查询结果进行排序: select * from table_name order by field1,orderby field2;多重排序 </p>
<p>19.退出 MySQL:exit; </p>
<p>20.删除表中所有数据： truncate table 数据表名称 （不可恢复）</p>
<p>linux下导入、导出mysql数据库命令</p>
<p>一、导出数据库用mysqldump命令（注意mysql的安装路径，即此命令的路径）：<br>1、导出数据和表结构：<br>mysqldump -u用户名 -p密码 数据库名 &gt; 数据库名.sql</p>
<p>#/usr/local/mysql/bin/   mysqldump -uroot -p abc &gt; abc.sql<br>敲回车后会提示输入密码</p>
<p>2、只导出表结构<br>mysqldump -u用户名 -p密码 -d 数据库名 &gt; 数据库名.sql</p>
<p>#/usr/local/mysql/bin/   mysqldump -uroot -p -d abc &gt; abc.sql</p>
<p>注：/usr/local/mysql/bin/  —&gt;  mysql的data目录</p>
<p>二、导入数据库<br>1、首先建空数据库<br>mysql&gt;create database abc;</p>
<p>2、导入数据库<br>方法一：<br>（1）选择数据库<br>mysql&gt;use abc;<br>（2）设置数据库编码<br>mysql&gt;set names utf8;<br>（3）导入数据（注意sql文件的路径）<br>mysql&gt;source /home/abc/abc.sql;<br>方法二：<br>mysql -u用户名 -p密码 数据库名 &lt; 数据库名.sql</p>
<p>#mysql -uabc_f -p abc &lt; abc.sql</p>
<p>建议使用第二种方法导入。</p>
<p>注意：有命令行模式，有sql命令</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/03/Java_Thread/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/03/Java_Thread/" itemprop="url">Java线程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-03T14:22:35+08:00">
                2017-08-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a> 
<p>###Java线程<br>sleep(int num) 方法是指当前的线程睡眠 num 时间，在线程的 run 方法中调用（是 Thread 的一个方法），有同学会无意中写在 Runnable 中，发现 sleep     方法始终不被识别。</p>
<p>Object lock = new Object();<br><br>lock 可以执行 wait 和 notify 方法，进行不同线程的状态切换<br><br><br><br>wait() 当前已经获得锁的线程进入等待状态 <br><br>notify() 当前线程结束，并通知处于等待状态的线程继续执行</p>
<p><strong>每个对象都有一把锁</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">Object lock = <span class="keyword">new</span> Object();&lt;br&gt;</div><div class="line"><span class="comment">//线程1中的加锁语句</span></div><div class="line"><span class="keyword">synchronized</span> (lock) &#123;</div><div class="line"><span class="comment">//。。。</span></div><div class="line"><span class="keyword">try</span> &#123;						   </div><div class="line">  lock.wait(); <span class="comment">//当前线程进入等待状态</span></div><div class="line">&#125; </div><div class="line"><span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">  e.printStackTrace();</div><div class="line">&#125;</div><div class="line"><span class="comment">//。。。</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//线程2中的加锁语句</span></div><div class="line"><span class="keyword">synchronized</span> (lock) &#123;</div><div class="line"><span class="comment">//。。。</span></div><div class="line">lock.notify();<span class="comment">//通知启动等待状态的线程开启</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>1、流程1，先 start 线程1，后 start 线程2<br>执行到线程1的加锁语句，此时lock没有加锁顺利执行，然后执行lock.wait();此时lock的锁进入等待状态（可以被其他访问）<br>线程2中的加锁语句就可以拿到锁，执行完语句后，lock.notify()进行了唤醒通知，wait队列中的等待线程开始执行Object lock = new Object();<br></p>
<p>####注意事项<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> Thread()&#123;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</div><div class="line"><span class="comment">//...</span></div><div class="line">&#125;</div><div class="line">&#125;.start();</div></pre></td></tr></table></figure></p>
<p>main()创建 Thread 对象时,它并未捕获任何一个对象的句柄。普通对象对于垃圾收集来说是一种“公平竞<br>赛”,但线程却并非如此。每个线程都会“注册”自己,所以某处实际存在着对它的一个引用。这样一来,<br>垃圾收集器便只好对它“瞠目以对”了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/icon.jpg"
               alt="Baronli" />
          <p class="site-author-name" itemprop="name">Baronli</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">58</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Baronli</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
