<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Baronli" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="Baronli">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="Baronli">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Baronli">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/4/"/>





  <title>Baronli</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Baronli</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/03/Android性能优化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/03/Android性能优化/" itemprop="url">Android性能优化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-03T11:39:56+08:00">
                2017-08-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a> 
<p>###Android性能优化</p>
<p>####检测工具</p>
<p>#####（1）Android Lint<br>Android studio中内置了代码检测工具Lint<br><br>找到Analyze目录下的Inspect Code检查代码选项点击<br><br>弹出下面这个框框，在这个列表选项中我们可以选择Inspect Code的范围，点击OK<br><br>待分析完毕后，我们可以在Inspection栏目中看到检查的结果,其中，我们从检查结果可知，它会给出所有在这个项目中不规范的编码、多余的资源、可能的bug、或者其它的一些问题，然后会给出修改的建议供我们参考，虽然这些问题并不会影响App的正常运行，不过这对于项目的规范性和维护性来说是非常重要的。</p>
<p>#####（2）Android Monitors<br>通过Monitors工具我们可以观察到Memory、GPU、CPU、Network在各个时间段里的运行占比。通过分析数据，我们可以知道在进入到某个页面或者执行某个方法时，各个资源的耗费。</p>
<p>#####（3）APK Analyzer</p>
<p>1、将一个apk拖动到Android Studio的编辑器窗口<br>2、在Project窗口中，双击build/output/apks/目录下的apk<br>3、在菜单栏中选择选择Build &gt; Analyze APK，然后选择要分析的apk</p>
<p>####网络加载时间（发送、接收、处理、显示）</p>
<p>####内存泄露</p>
<p>####OOM</p>
<p>####控件加载速度（地图、图表格）</p>
<p>####APK大小压缩</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/03/Android图片压缩问题详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/03/Android图片压缩问题详解/" itemprop="url">Android图片压缩以及拍照后压缩的注意事项</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-03T11:39:49+08:00">
                2017-08-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a> 
<p>####Android图片压缩以及拍照后压缩的注意事项<br><strong>注意</strong>：我们在调用相机拍照在onActivityResult中所获取到的Bitmap是已经被系统压缩过的。<br>如何得到原图？<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">takePhoto</span><span class="params">(Activity activity, <span class="keyword">int</span> key)</span> </span>&#123;</div><div class="line">       <span class="comment">// 用来保存的图片名</span></div><div class="line">       String camera_photo_name = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyyMMddhhmmss"</span>).format(<span class="keyword">new</span> Date())+<span class="string">".jpg"</span>;</div><div class="line">       <span class="comment">//保存图片的路径</span></div><div class="line">       String camera_path = Environment.getExternalStorageDirectory()</div><div class="line">               .toString()</div><div class="line">               + File.separator</div><div class="line">               + <span class="string">"juli/image/"</span>;</div><div class="line">       Intent intent = <span class="keyword">new</span> Intent(MediaStore.ACTION_IMAGE_CAPTURE);</div><div class="line">       File path1 = <span class="keyword">new</span> File(camera_path);</div><div class="line">       <span class="keyword">if</span> (!path1.exists()) &#123;</div><div class="line">           path1.mkdirs();</div><div class="line">       &#125;</div><div class="line">       File file = <span class="keyword">new</span> File(path1, camera_photo_name);</div><div class="line">       intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(file));</div><div class="line">       activity.startActivityForResult(intent, key);</div><div class="line">       <span class="keyword">return</span> camera_path+camera_photo_name;</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<p>对Bitmap进行压缩后保存成文件<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">saveImage</span><span class="params">(Bitmap b)</span> </span>&#123;</div><div class="line">       File myCaptureFile = <span class="keyword">null</span>;</div><div class="line">       String name = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyyMMddhhmmss"</span>).format(<span class="keyword">new</span> Date());</div><div class="line">       String fileNmae = Environment.getExternalStorageDirectory()</div><div class="line">               .toString()</div><div class="line">               + File.separator</div><div class="line">               + <span class="string">"juli/image/"</span></div><div class="line">               + name</div><div class="line">               + <span class="string">".jpg"</span>;</div><div class="line"></div><div class="line">       String srcPath = fileNmae;</div><div class="line">       myCaptureFile = <span class="keyword">new</span> File(fileNmae);</div><div class="line">       <span class="keyword">try</span> &#123;</div><div class="line">           <span class="keyword">if</span> (Environment.getExternalStorageState().equals(</div><div class="line">                   Environment.MEDIA_MOUNTED)) &#123;</div><div class="line">               <span class="keyword">if</span> (!myCaptureFile.getParentFile().exists()) &#123;</div><div class="line">                   myCaptureFile.getParentFile().mkdirs();</div><div class="line">               &#125;</div><div class="line">               BufferedOutputStream bos;</div><div class="line">               bos = <span class="keyword">new</span> BufferedOutputStream(<span class="keyword">new</span> FileOutputStream(</div><div class="line">                       myCaptureFile));</div><div class="line">               b.compress(Bitmap.CompressFormat.JPEG, <span class="number">80</span>, bos);</div><div class="line">               bos.flush();</div><div class="line">               bos.close();</div><div class="line">           &#125; <span class="keyword">else</span> &#123;</div><div class="line">           &#125;</div><div class="line">       &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</div><div class="line">           e.printStackTrace();</div><div class="line">       &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">           e.printStackTrace();</div><div class="line">       &#125;</div><div class="line">       b.recycle(); <span class="comment">//释放BitMap 资源</span></div><div class="line">       <span class="keyword">return</span> fileNmae;</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<p>从本地获取图片（获取的时候进行压缩）<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">static</span> Bitmap <span class="title">compressImageFromFile</span><span class="params">(String srcPath)</span> </span>&#123;</div><div class="line">      BitmapFactory.Options newOpts = <span class="keyword">new</span> BitmapFactory.Options();</div><div class="line">      newOpts.inJustDecodeBounds = <span class="keyword">false</span>;<span class="comment">// 只读边,不读内容</span></div><div class="line">      Bitmap bitmap = BitmapFactory.decodeFile(srcPath, <span class="keyword">null</span>);</div><div class="line"></div><div class="line">      newOpts.inJustDecodeBounds = <span class="keyword">false</span>;</div><div class="line">      <span class="keyword">int</span> w = newOpts.outWidth;</div><div class="line">      <span class="keyword">int</span> h = newOpts.outHeight;</div><div class="line">      <span class="keyword">float</span> hh = <span class="number">800f</span>;<span class="comment">//</span></div><div class="line">      <span class="keyword">float</span> ww = <span class="number">480f</span>;<span class="comment">//</span></div><div class="line">      <span class="keyword">int</span> be = <span class="number">1</span>;</div><div class="line">      <span class="keyword">if</span> (w &gt; h &amp;&amp; w &gt; ww) &#123;</div><div class="line">          be = (<span class="keyword">int</span>) (newOpts.outWidth / ww);</div><div class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (w &lt; h &amp;&amp; h &gt; hh) &#123;</div><div class="line">          be = (<span class="keyword">int</span>) (newOpts.outHeight / hh);</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">if</span> (be &lt;= <span class="number">0</span>)</div><div class="line">          be = <span class="number">1</span>;</div><div class="line">      newOpts.inSampleSize = be;<span class="comment">// 设置采样率</span></div><div class="line"></div><div class="line">      <span class="comment">// newOpts.inPreferredConfig = Config.ARGB_8888;//该模式是默认的,可不设</span></div><div class="line">      newOpts.inPurgeable = <span class="keyword">true</span>;<span class="comment">// 同时设置才会有效</span></div><div class="line">      newOpts.inInputShareable = <span class="keyword">true</span>;<span class="comment">// 。当系统内存不够时候图片自动被回收</span></div><div class="line"></div><div class="line">      bitmap = BitmapFactory.decodeFile(srcPath, newOpts);</div><div class="line">      <span class="comment">// return compressBmpFromBmp(bitmap);//原来的方法调用了这个方法企图进行二次压缩</span></div><div class="line">      <span class="comment">// 其实是无效的,大家尽管尝试</span></div><div class="line">      <span class="keyword">return</span> bitmap;</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/03/Android制作可以拉伸的9png图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/03/Android制作可以拉伸的9png图/" itemprop="url">制作.9.png图</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-03T11:39:44+08:00">
                2017-08-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a> 
<p>####制作.9.png图<br>Android的SDK中专门提供了制图工具draw9patch，路径在sdk的tools中。</p>
<p>Android 中在处理图像时非常容易出现的问题OOM<br><br>java.lang.OutOfMemoryError: Failed to allocate a 10240012 byte allocation with 5517696 free bytes and 5MB until OOM</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/03/Android中RecyclerView与ScrollView一起使用导致显示不全/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/03/Android中RecyclerView与ScrollView一起使用导致显示不全/" itemprop="url">ndroid中ScrollView与Recyclerview使用，导致ReCycleView不显示，或者部分内容显示不全解决</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-03T11:39:24+08:00">
                2017-08-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a> 
<p>Android中ScrollView与Recyclerview使用，导致ReCycleView不显示，或者部分内容显示不全解决<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLinearLayoutManager</span> <span class="keyword">extends</span> <span class="title">LinearLayoutManager</span> </span>&#123;  </div><div class="line">  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = MyLinearLayoutManager.class.getSimpleName();  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyLinearLayoutManager</span><span class="params">(Context context)</span> </span>&#123;  </div><div class="line">        <span class="keyword">super</span>(context);  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyLinearLayoutManager</span><span class="params">(Context context, <span class="keyword">int</span> orientation, <span class="keyword">boolean</span> reverseLayout)</span> </span>&#123;  </div><div class="line">        <span class="keyword">super</span>(context, orientation, reverseLayout);  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] mMeasuredDimension = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];  </div><div class="line">  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(RecyclerView.Recycler recycler, RecyclerView.State state,  </span></span></div><div class="line"><span class="function"><span class="params">                          <span class="keyword">int</span> widthSpec, <span class="keyword">int</span> heightSpec)</span> </span>&#123;  </div><div class="line">  </div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> widthMode = View.MeasureSpec.getMode(widthSpec);  </div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> heightMode = View.MeasureSpec.getMode(heightSpec);  </div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> widthSize = View.MeasureSpec.getSize(widthSpec);  </div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> heightSize = View.MeasureSpec.getSize(heightSpec);  </div><div class="line">        <span class="keyword">int</span> width = <span class="number">0</span>;  </div><div class="line">        <span class="keyword">int</span> height = <span class="number">0</span>;  </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; getItemCount(); i++) &#123;  </div><div class="line">            measureScrapChild(recycler, i,  </div><div class="line">                    View.MeasureSpec.makeMeasureSpec(i, View.MeasureSpec.UNSPECIFIED),  </div><div class="line">                    View.MeasureSpec.makeMeasureSpec(i, View.MeasureSpec.UNSPECIFIED),  </div><div class="line">                    mMeasuredDimension);  </div><div class="line">  </div><div class="line">            <span class="keyword">if</span> (getOrientation() == HORIZONTAL) &#123;  </div><div class="line">                width = width + mMeasuredDimension[<span class="number">0</span>];  </div><div class="line">                <span class="keyword">if</span> (i == <span class="number">0</span>) &#123;  </div><div class="line">                    height = mMeasuredDimension[<span class="number">1</span>];  </div><div class="line">                &#125;  </div><div class="line">            &#125; <span class="keyword">else</span> &#123;  </div><div class="line">                height = height + mMeasuredDimension[<span class="number">1</span>];  </div><div class="line">                <span class="keyword">if</span> (i == <span class="number">0</span>) &#123;  </div><div class="line">                    width = mMeasuredDimension[<span class="number">0</span>];  </div><div class="line">                &#125;  </div><div class="line">            &#125;  </div><div class="line">        &#125;  </div><div class="line">        <span class="keyword">switch</span> (widthMode) &#123;  </div><div class="line">            <span class="keyword">case</span> View.MeasureSpec.EXACTLY:  </div><div class="line">                width = widthSize;  </div><div class="line">            <span class="keyword">case</span> View.MeasureSpec.AT_MOST:  </div><div class="line">            <span class="keyword">case</span> View.MeasureSpec.UNSPECIFIED:  </div><div class="line">        &#125;  </div><div class="line">  </div><div class="line">        <span class="keyword">switch</span> (heightMode) &#123;  </div><div class="line">            <span class="keyword">case</span> View.MeasureSpec.EXACTLY:  </div><div class="line">                height = heightSize;  </div><div class="line">            <span class="keyword">case</span> View.MeasureSpec.AT_MOST:  </div><div class="line">            <span class="keyword">case</span> View.MeasureSpec.UNSPECIFIED:  </div><div class="line">        &#125;  </div><div class="line">  </div><div class="line">        setMeasuredDimension(width, height);  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">measureScrapChild</span><span class="params">(RecyclerView.Recycler recycler, <span class="keyword">int</span> position, <span class="keyword">int</span> widthSpec,  </span></span></div><div class="line"><span class="function"><span class="params">                                   <span class="keyword">int</span> heightSpec, <span class="keyword">int</span>[] measuredDimension)</span> </span>&#123;  </div><div class="line">        <span class="keyword">try</span> &#123;  </div><div class="line">            View view = recycler.getViewForPosition(<span class="number">0</span>);  </div><div class="line">  </div><div class="line">            <span class="keyword">if</span> (view != <span class="keyword">null</span>) &#123;  </div><div class="line">                RecyclerView.LayoutParams p = (RecyclerView.LayoutParams) view.getLayoutParams();  </div><div class="line">  </div><div class="line">                <span class="keyword">int</span> childWidthSpec = ViewGroup.getChildMeasureSpec(widthSpec,  </div><div class="line">                        getPaddingLeft() + getPaddingRight(), p.width);  </div><div class="line">  </div><div class="line">                <span class="keyword">int</span> childHeightSpec = ViewGroup.getChildMeasureSpec(heightSpec,  </div><div class="line">                        getPaddingTop() + getPaddingBottom(), p.height);  </div><div class="line">  </div><div class="line">                view.measure(childWidthSpec, childHeightSpec);  </div><div class="line">                measuredDimension[<span class="number">0</span>] = view.getMeasuredWidth() + p.leftMargin + p.rightMargin;  </div><div class="line">                measuredDimension[<span class="number">1</span>] = view.getMeasuredHeight() + p.bottomMargin + p.topMargin;  </div><div class="line">                recycler.recycleView(view);  </div><div class="line">            &#125;  </div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;  </div><div class="line">            e.printStackTrace();  </div><div class="line">        &#125; <span class="keyword">finally</span> &#123;  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/03/Activity的View层级关系/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/03/Activity的View层级关系/" itemprop="url">AndroidView加载机制详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-03T11:39:10+08:00">
                2017-08-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a> 
<p>####AndroidView加载机制详解<br>大家可能都零零散散地了解过windo,phoneWindow,rootView,以及我们时时刻刻都天天见的setContentView(R.layout.mlayout).</p>
<p>下面两张图分别是一个activity的页面元素的实际层次和逻辑关系图<br><br><img src="./images/activity_view层级2.jpg" alt="view层级"><br><img src="./images/activity_view层级１.png" alt="view层级"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/03/观察者模式详解--Android实战演练/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/03/观察者模式详解--Android实战演练/" itemprop="url">观察者模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-03T11:39:02+08:00">
                2017-08-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a> 
<p>###观察者模式–快速理解观察者模式<br><a href="">原理解释</a><br><br><a href="">实际项目使用场景</a></p>
<p>####原理解释<br>例子： 当我们在电脑键盘上打字时，敲下”A”,屏幕上会立刻出现一个 “A”。（当然实际上还会有很多处理流程，此处我们简化忽略）<br><br><br><br> 这就可以理解成一个观察者模式，其中：<strong>屏幕</strong>是一个<strong>观察者</strong>，<strong>键盘</strong>是<strong>被观察者</strong>，<strong>数据线</strong>则是他们之间的关联（<strong>订阅</strong>），屏幕时刻在观察着键盘，键盘敲了什么，屏幕就立刻显示什么。<br><br> <br><br> <strong>订阅</strong> 是观察者和被观察者联系的桥梁，上面的例子中–屏幕到键盘这里做了一个订阅动作（数据线），告诉键盘，如果有任何输入，立马通过数据线告知我。<br></p>
<p>下面我们通过Java代码实现上面的例子并进行分析：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.LinkedList;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 观察者接口</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * <span class="doctag">@author</span> stormbaron</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Oberver</span> </span>&#123;</div><div class="line">	<span class="comment">// 观察到情况后的动作（回调方法）</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 被观察者接口</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * <span class="doctag">@author</span> stormbaron</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Oberved</span> </span>&#123;</div><div class="line">	<span class="comment">// 订阅</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(Oberver oberver)</span></span>;</div><div class="line"></div><div class="line">	<span class="comment">// 通知所有订阅的观察者</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyOberver</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 键盘类（被观察者）</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * <span class="doctag">@author</span> stormbaron</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">KeyBoard</span> <span class="keyword">implements</span> <span class="title">Oberved</span> </span>&#123;</div><div class="line">	<span class="comment">// 观察者集合</span></div><div class="line">	List&lt;Oberver&gt; Obervers = <span class="keyword">new</span> LinkedList&lt;Oberver&gt;();</div><div class="line"></div><div class="line">	<span class="comment">// 订阅</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(Oberver oberver)</span> </span>&#123;</div><div class="line">		Obervers.add(oberver);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 通知观察者</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyOberver</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (Obervers != <span class="keyword">null</span>) &#123;</div><div class="line">			<span class="keyword">for</span> (Oberver mOberver : Obervers) &#123;</div><div class="line">				mOberver.work();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 屏幕类(观察者)</span></div><div class="line"><span class="comment"> * </span></div><div class="line"><span class="comment"> * <span class="doctag">@author</span> stormbaron</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Screen</span> <span class="keyword">implements</span> <span class="title">Oberver</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">" I am "</span> + <span class="keyword">this</span>.toString() + <span class="string">",I get a Message that KeyBoard imput "</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObserverTest</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		Oberved myKeyBoad = <span class="keyword">new</span> KeyBoard();</div><div class="line">		Oberver myScreen1 = <span class="keyword">new</span> Screen();</div><div class="line">		Oberver myScreen2 = <span class="keyword">new</span> Screen();</div><div class="line">		Oberver myScreen3 = <span class="keyword">new</span> Screen();</div><div class="line">		<span class="comment">// 订阅</span></div><div class="line">		myKeyBoad.subscribe(myScreen1);</div><div class="line">		myKeyBoad.subscribe(myScreen2);</div><div class="line">		myKeyBoad.subscribe(myScreen3);</div><div class="line">		<span class="comment">// 通知</span></div><div class="line">		myKeyBoad.notifyOberver();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>上面的代码实现了多个屏幕观察一个键盘，并在键盘发出一个通知后所有订阅的屏幕同时反应。</p>
<p>####实际项目使用场景<br><strong>实际需求</strong>：<br><br>一个Android界面同时显示3个图表，图表数据来自网络，每隔30秒更新一次数据。<br><br><strong>思路</strong><br><br><strong>View层</strong>：   3个Fragment<br><br><strong>Control层</strong>：Activity<br><br><strong>Model层</strong>：一个DataModel + HttpUtil 在DataModel提供3个公开的返回特定格式数据方法<br></p>
<p>此处进行简单MVC模式的分层操作，</p>
<p>此时，我们实际上有许多种方法可以达成目标，例如<br><br>（1）在DataModel中利用定时任务，每30秒进行一次网络数据请求，然后更新保存在DataModel中的封装数据（提供给View层）<br></p>
<p>在Fragment中利用定时任务，定时刷新图表。<br><br>  （2）利用观察者模式，在DataModel中利用定时任务，每30秒进行一次网络数据请求，然后更新保存在DataModel中的封装数据（提供给View层），同时向所有有订阅关系的Fragment发送通知，使所有Fragment及时刷新图表。<br></p>
<p> 事实上上面两种方式，主要是在View层的数据刷新上有所区别，一种是自己主动不断定时去判断和刷新，另外一种则是被动通知刷新。<br><br> 从实现角度讲，第一种更简单容易想到和实现，View层和Model层也不需要有任何耦合，但是需要额外运行多个子线程，增加了开销，同时也造成页面数据刷新的不及时。<br> 而第二种方法，利用观察者模式，Fragment实现观察者接口，DataModel实现被观察者接口，将3个Fragment全部订阅到DataModel中，每次DataModel完成数据更新后调用notifyOberver()，通知所有观察者（Fragment）进行数据更新。降低了内存开销，并且及时地进行数据刷新。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/03/百度地图使用记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/03/百度地图使用记录/" itemprop="url">百度地图使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-03T11:38:58+08:00">
                2017-08-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a> 
<p>####百度地图使用</p>
<p>注意：只显示网<br>原因分析：<br>１、Key值和秘钥不对<br>　　因为发布APP和调试APP使用的jks文件一般是不一样的，所以需要分别得到对应的sha1值，然后分别获取对应的sha1h值，否则key值不对就会只显示空格</p>
<p>获取sha1的命令  keytool -list -v -keystore jl_release.jks</p>
<p>２、没有网络</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/03/开发错误集锦/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/03/开发错误集锦/" itemprop="url">Android开发错误集锦</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-03T11:33:11+08:00">
                2017-08-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>###Android开发错误集锦</p>
<p>#####NULLPoint空指针<br>Activity生命周期结束，导致其中的持有Actiｖity引用的定时任务的引用变为ｎｕｌｌ。</p>
<p>#####ClassCastException<br>多出现在强制类型转变上</p>
<p>####命令行启动avd<br>在tools的目录下   ./emulator -netdelay none -netspeed full -avd Nexus23<br>可能报错   </p>
<p>####./emulator -netdelay none -netspeed full -avd api25</p>
<p>emulator: ERROR: This AVD’s configuration is missing a kernel file! Please ensure the file “kernel-ranchu” is in the same location as your system image.<br>emulator: ERROR: ANDROID_SDK_ROOT is undefined</p>
<p>解决方法 ：给root添加<br>export PATH=/home/stormbaron/android-sdk-linux/platform-tools/:$PATH</p>
<p>####新的问题<br> libGL error: unable to load driver: i965_dri.so<br>libGL error: driver pointer missing<br>libGL error: failed to load driver: i965<br>libGL error: unable to load driver: i965_dri.so<br>libGL error: driver pointer missing<br>libGL error: failed to load driver: i965<br>libGL error: unable to load driver: swrast_dri.so<br>libGL error: failed to load driver: swrast<br>X Error of failed request:  GLXBadContext<br>  Major opcode of failed request:  155 (GLX)<br>  Minor opcode of failed request:  6 (X_GLXIsDirect)<br>  Serial number of failed request:  55<br>  Current serial number in output stream:  54<br>emulator: ERROR: This AVD’s configuration is missing a kernel file! Please ensure the file “kernel-ranchu” is in the same location as your system image.<br>emulator: ERROR: ANDROID_SDK_ROOT is undefined<br>解决方法<br> Rather than launching the emulator from Android Studio, open the terminal and cd into the tools directory withing your Android SDK directory - mine is ~/Android/Sdk/tools. From there run the command:<br></p>
<p>LD_PRELOAD=’/usr/$LIB/libstdc++.so.6’ DISPLAY=:0 ./emulator -avd <insert avd="" name="" here="">    </insert></p>
<p>###Android错误</p>
<p>####Spinner点击item无反应<br>原因：adapter的list来源于异步线程执行的网络请求，可能导致adpter异常，将list换成一个固定的列表值后正常。</p>
<h4 id="The-error-of-install-apk"><a href="#The-error-of-install-apk" class="headerlink" title="The error of install apk"></a>The error of install apk</h4><p><em>INSTALL_FAILED_NO_MATCHING_ABIS</em>  is when you are trying to install an app that has native libraries and it doesn’t have a native library for your cpu architecture. For example if you compiled an app for armv7 and are trying to install it on an emulator that uses the Intel architecture instead it will not work.　　</p>
<p>#####java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState</p>
<p>###Android Studio</p>
<p>#####多个Module依赖了相同的第三方包，在打包编译时会爆出重复的错误。<br>涉及compile,provided,apk之间的区别，compile是指该第三方包始终被需要（编译、打包、发布、测试）<br>provided是指该第三方包编译时需要，不会被打包进apk中</p>
<p>####java.lang.SecurityException: MODE_WORLD_READABLE no longer supported<br>在新版本7.0的Android API中在进行getSharedPreferences时不再支持<br>4中模式：</p>
<p>四种模式，分别为：<br>Context.MODE_PRIVATE    = 0<br>Context.MODE_APPEND    = 32768<br>Context.MODE_WORLD_READABLE = 1<br>Context.MODE_WORLD_WRITEABLE = 2<br>7.0后<br>代码调用，存放在data/data/包名/xxx<br>目录下的文件设置<br>Context.MODE_WORLD_READABLE = 1<br>Context.MODE_WORLD_WRITEABLE = 2<br>会抛安全异常！！！</p>
<p>改用<br>MODE_PRIVATE</p>
<h4 id="android-database-sqlite-SQLiteException-table-videoinfo-table-already-exists-code-1-while-compiling-create-table-videoinfo-table-id-integer-primary-key-autoincrement-title-text-path-text-imagePath-text-size-real-position-real-duration-real"><a href="#android-database-sqlite-SQLiteException-table-videoinfo-table-already-exists-code-1-while-compiling-create-table-videoinfo-table-id-integer-primary-key-autoincrement-title-text-path-text-imagePath-text-size-real-position-real-duration-real" class="headerlink" title="android.database.sqlite.SQLiteException: table videoinfo_table already exists (code 1): , while compiling: create table videoinfo_table(_id integer primary key autoincrement,title text,path text,imagePath text,size real,position real,duration real)"></a>android.database.sqlite.SQLiteException: table videoinfo_table already exists (code 1): , while compiling: create table videoinfo_table(_id integer primary key autoincrement,title text,path text,imagePath text,size real,position real,duration real)</h4><p>####Android studio 打包<br>Error:(11) Error: “main_title” is not translated in “en” (English) [MissingTranslation]<br>Error:Execution failed for task ‘:app:lintVitalRelease’.</p>
<blockquote>
<p>Lint found fatal errors while assembling a release target.<br>  To proceed, either fix the issues identified by lint, or modify your build script as follows:<br>  …<br>  android {<br>      lintOptions {<br>          checkReleaseBuilds false<br>          // Or, if you prefer, you can continue to check for errors in release builds,<br>          // but continue the build even when errors are found:<br>          abortOnError false<br>      }<br>  }<br>  …<br>在打包的时候String.xml 中出现了问题<br>在build.gradle<br>   //添加如下配置就ok了<br>    lintOptions {<br>        checkReleaseBuilds false<br>        abortOnError false<br>    }</p>
</blockquote>
<p>####Adb 安装APK时报错<br>打开cmd 跳转到adb.exe所在的目录文件夹下 （D:\android-sdk-windows\platform-tools）：<br>adb install  abc.apk(如果此apk没有在当前目录下，还需要带上绝对路径，否则无法找到此apk)<br>这些错误基本是在 cmd 命令行安装时遇到的。</p>
<p>INSTALL_FAILED_ALREADY_EXISTS                 程序已经存在<br>INSTALL_FAILED_INVALID_APK                     无效的APK<br>INSTALL_FAILED_INVALID_URI                     无效的链接<br>INSTALL_FAILED_INSUFFICIENT_STORAGE          没有足够的存储空间<br>INSTALL_FAILED_DUPLICATE_PACKAGE             已存在同名程序<br>INSTALL_FAILED_NO_SHARED_USER                要求的共享用户不存在<br>INSTALL_FAILED_UPDATE_INCOMPATIBLE           版本不能共存<br>INSTALL_FAILED_SHARED_USER_INCOMPATIBLE     需求的共享用户签名错误<br>INSTALL_FAILED_MISSING_SHARED_LIBRARY       需求的共享库已丢失<br>INSTALL_FAILED_REPLACE_COULDNT_DELETE      需求的共享库无效<br>INSTALL_FAILED_DEXOPT                          dex优化验证失败<br>INSTALL_FAILED_OLDER_SDK                      系统版本过旧<br>INSTALL_FAILED_CONFLICTING_PROVIDER          存在同名的内容提供者<br>INSTALL_FAILED_NEWER_SDK                      系统版本过新<br>INSTALL_FAILED_TEST_ONLY                      调用者不被允许测试的测试程序<br>INSTALL_FAILED_CPU_ABI_INCOMPATIBLE         包含的本机代码不兼容<br>CPU_ABIINSTALL_FAILED_MISSING_FEATURE       使用了一个无效的特性<br>INSTALL_FAILED_CONTAINER_ERROR              SD卡访问失败<br>INSTALL_FAILED_INVALID_INSTALL_LOCATION     无效的安装路径<br>INSTALL_FAILED_MEDIA_UNAVAILABLE            SD卡不存在<br>INSTALL_FAILED_INTERNAL_ERROR                系统问题导致安装失败<br>DEFAULT                                          未知错误</p>
<p>####Fragment相关</p>
<p>######(1)java.lang.IllegalStateException异常产生的原因及解决办法<br>Can not perform this action after onSaveInstanceState<br><br>错误类型大致为以下几种：<br>java.lang.IllegalStateException：Cannot   forward   a   response   that   is   already   committed <br><br>IllegalStateException：response already commited <br><br>IllegalStateException：getOutputStream() has already been called for this request<br>…..<br><br>IllegalStateException: Can not perform this action after onSaveInstanceState：<br><br><strong>解决办法</strong>：onSaveInstanceState方法是在该Activity即将被销毁前调用，来保存Activity数据的，如果在保存完状态后<br>再给它添加Fragment就会出错。解决办法就是把commit（）方法替换成 commitAllowingStateLoss()</p>
<p>######(２)java.lang.IllegalStateException<br>Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 1 column 37 path $.data<br><br>错误原因：该异常是由于服务器错误返回的JSON字符串和服务器正常下时返回的JSON字符串结构不同,导致利用Gson解析的时候报了一个异常:本该去解析集合却强制去解析对象所致.<br>解决办法:在使用Gson解析JSON时try cash一下,不报错按照正常逻辑继续解析,报异常则处理为请求失败逻辑即可.</p>
<p>######(3)FATAL EXCEPTION: main Process: com.julit.elevator_maint, PID: 2158<br>java.lang.RuntimeException: Unable to instantiate application<br> com.juli.elevator_ivms.app.DemoApp: java.lang.ClassNotFoundException: Didn’t find class “com.juli.elevator_ivms.app.DemoApp” on path: DexPathList[[zip file “/data/app/com.julit.elevator_maint-1/base.apk”],nativeLibraryDirectories=[/data/app/com.julit.elevator_maint-1/lib/arm, /data/app/com.julit.elevator_maint-1/base.apk!/lib/armeabi-v7a, /vendor/lib, /system/lib]]</p>
<p> ######(4)错误：Error:Execution failed for task ‘:app:mergeDebugResources’.</p>
<blockquote>
<p>Some file crunching failed, see logs for details</p>
</blockquote>
<p>原因：这是图片格式错了</p>
<p>解决：不要把图片的后缀直接修改为.png</p>
<p>######(4)ERROR: 9-patch image<br>项目中有9-patch用ant脚本来编译的时候有错，如果直接用eclipse打包就没有问题<br> ERROR: 9-patch image /home/stormbaron/work/GitProject/Company/JuliSale_AS/app/src/main/res/drawable-hdpi/search_bar_edit_pressed.9.png malformed.<br>AAPT:        Frame pixels must be either solid or transparent (not intermediate alphas).<br>AAPT:        Found at pixel #15 along top edge.</p>
<p>解决方案　：那张图有问题，.9.png图，顶部和左侧必须要设置拉伸区域（右侧和底部可以不设置）否则会报错</p>
<p>######(５)<br> Execution failed for task ‘:app:transformResourcesWithMergeJavaResForDebug’.</p>
<blockquote>
<p>com.android.build.api.transform.TransformException: com.android.builder.packaging.DuplicateFileException: Duplicate files copied in APK META-INF/LICENSE<br>      File1: /home/stormbaron/work/GitProject/Company/JuliSale_AS/app/libs/httpclient-4.3.1.jar<br>      File2: /home/stormbaron/work/GitProject/Company/JuliSale_AS/app/libs/httpcore-4.3.jar<br>貌似说两个包里面的文件重复了还是怎么的，谷歌了一番之后据说应该是 android studio 自身的bug<br>解决办法：<br>打开项目下面的 build.gradle 文件，在 android 代码块中添加下面代码<br>[sql] view plain copy<br>android {<br>    packagingOptions {<br>        exclude ‘META-INF/DEPENDENCIES’<br>        exclude ‘META-INF/NOTICE’<br>        exclude ‘META-INF/LICENSE’<br>        exclude ‘META-INF/LICENSE.txt’<br>        exclude ‘META-INF/NOTICE.txt’<br>    }<br>}  </p>
</blockquote>
<p>将这些文件全部排出掉就ok了</p>
<p>git init 产生的目录解释<br>error: src refspec master does not match any.<br>引起该错误的原因是，目录中没有文件，空目录是不能提交上去的</p>
<p>####网络权限问题（6.0之后的申请）<br>所有需要使用的权限都必须在Mainfest中进行申明，6.0以后的动态获取，只是针对你所申明的权限做的一个授权，如果你在Mainfest中没有进行申明的话，动态权限的框不会显示</p>
<p>####Java Method Call Expected<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">incListener</span></span>&#123;&#125;</div><div class="line"><span class="comment">//报错的使用</span></div><div class="line">increase.addActionListener(incListener());</div><div class="line"><span class="comment">//正确的使用</span></div><div class="line">increase.addActionListener(<span class="keyword">new</span> incListener());</div></pre></td></tr></table></figure></p>
<p>#####Android studio在使用打包时（buildToolsVersion）<br>Error:In <declare-styleable> ConstraintSet, unable to find attribute android:elevation<br>　　　这个问题主要和api的版本问题有关(原本是20报错，改成21后正常)<br>    compileSdkVersion 21<br>    buildToolsVersion “25.0.1”</declare-styleable></p>
<p>####Activity与Fragment需要相匹配</p>
<p>android.view.InflateException: Binary XML file line #9: Error inflating class fragment</p>
<p>当我们用的Activity时</p>
<p>应当  import android.app.Fragment.</p>
<p>当我们用的FragmentActivity 或者appcompatactivity(待验证)</p>
<p>应当 import android.support.v4.app.Fragment</p>
<p>否则在Activity是无法识别android.support.v4.app.Fragment的</p>
<p>####Fragment导致的空指针<br>java.lang.NullPointerException</p>
<p>Attempt to write to field ‘int android.support.v4.app.Fragment.mNextAnim’ on a null object reference</p>
<p>一个原因导致：在fragment为null的时候show或hide或remove了。所以在对Fragment进行操作前一定要进行判断。</p>
<p>#####Gson错误<br>java.lang.IllegalStateException: Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 1 column 2 path $<br>分析原因：在使用解析之前要先分析后台返回的是一个object还是一个array</p>
<p>#####Retrofit错误<br> java.lang.IllegalStateException: Already executed.<br> at retrofit2.OkHttpCall.enqueue(OkHttpCall.java:84)<br><br>原因：多次执行call.enqueue</p>
<p>java.lang.IllegalArgumentException: baseUrl must end in /: <a href="http://erp.joylive.com:10030/service.json" target="_blank" rel="external">http://erp.joylive.com:10030/service.json</a></p>
<p>java.lang.IllegalArgumentException: Unable to create call adapter for interface retrofit2.Call<br>=0  WEBRESENDSEGS=0  WEBRECVSEGS=1  WEBERRSEGS=0  WEBOUTRSTS=0  WEBESTABLISRST=0  WEBRTTDURATION=0  WEBRTTSEGS=0  WEBSNDDUPACKS=0  suckTimes=0 recovage_times=5]</p>
<p>####Android页面错误<br>android.view.WindowLeaked: Activity com.suda.julisale.utils.ImageGetActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{4333be18 V.E….. R……D 0,0-684,192} that was originally added here</p>
<p>多次调用Dialog的hide</p>
<p>####调用Intent时，需要显性声明，否则报错（5.0系统以后）<br>java.lang.IllegalArgumentException:Service Intent must be explicit: Intent { act=com.easi.mobile.locator.MobileLocatorService }</p>
<p>public class ShutdownBroadcastReceiver extends BroadcastReceiver {  </p>
<pre><code>private static final String ACTION_SHUTDOWN = &quot;android.intent.action.ACTION_SHUTDOWN&quot;;  

@Override  
public void onReceive(Context context, Intent intent) {

    if (intent.getAction().equals(ACTION_SHUTDOWN)) {


        SharedPreferences sp = context.getSharedPreferences(&quot;MobileLocator&quot;, Context.MODE_PRIVATE);  
        sp.edit().putString(&quot;instruct&quot;, &quot;exit&quot;).commit();  

        context.stopService(new Intent(PushGpsInfoService.ACTION_MOBILE_LOCATOR_SERVICE));
    }  

}  
</code></pre><p>}  </p>
<h4 id="Drawerlayout在代码中控制打开和关闭时报错"><a href="#Drawerlayout在代码中控制打开和关闭时报错" class="headerlink" title="Drawerlayout在代码中控制打开和关闭时报错"></a>Drawerlayout在代码中控制打开和关闭时报错</h4><p>   java.lang.IllegalArgumentException: No drawer view found with gravity LEFT<br>   解决办法:<br>   除了上面那段代码以外，还要在xml中，抽屉部分中增加：</p>
<p> android:layout_gravity=”left”</p>
<p>####org.json.JSONException: End of input at character 0 of<br>Json在获取时，对应是空值</p>
<h4 id="Glide错误"><a href="#Glide错误" class="headerlink" title="Glide错误"></a>Glide错误</h4><p>E/dex2oat: Failed to create oat file: /data/dalvik-cache/x86/data@app@com.example.stormbaron.agank-2@split_lib_dependencies_apk.apk@classes.dex: Permission denied</p>
<p>####Rxjava 使用时可能遇到的问题　Duplicate files copied in APK META-INF/rxjava.properties<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Error:Execution failed for task ':app:transformResourcesWithMergeJavaResForDebug'. &gt; com.android.build.api.transform.TransformException: com.android.builder.packaging.DuplicateFileException: Duplicate files copied in APK META-INF/rxjava.properties     File1: /home/stormbaron/.android/build-cache/79c3bd52eead62f9651d4f1445d26e97af7ad05b/output/jars/classes.jar     File2: /home/stormbaron/work/gradle-3.4/caches/modules-2/files-2.1/io.reactivex/rxjava/1.0.14/898f9ab61e2a23afd615f0b0389478bec86f49f9/rxjava-1.0.14.jar</div></pre></td></tr></table></figure></p>
<p>可用的解决方法：<br>  packagingOptions {<br>        exclude ‘META-INF/rxjava.properties’<br>    }</p>
<h4 id="当Glide正在对某个View进行操作时，如果进行setTag操作会报错"><a href="#当Glide正在对某个View进行操作时，如果进行setTag操作会报错" class="headerlink" title="当Glide正在对某个View进行操作时，如果进行setTag操作会报错"></a>当Glide正在对某个View进行操作时，如果进行setTag操作会报错</h4><p>java.lang.IllegalArgumentException: You must not call setTag() on a view Glide is targeting</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/03/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/03/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-03T11:29:23+08:00">
                2017-08-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/03/Linux使用Hexo搭建博客/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Baronli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Baronli">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/03/Linux使用Hexo搭建博客/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-03T11:26:14+08:00">
                2017-08-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Linux下使用Hexo搭建github博客<br>　　找到一篇靠谱的博客，备份一下：</p>
<p>－－－－－－－－－以下原文－－－－－－－－－－－－－－－－－－</p>
<p>Nodejs安装</p>
<p>因为hexo是基于nodejs的应用，所以要先安装nodejs才可以。我这里以Ubuntu为例，因为我自己一直在使用ubuntu。使用如下命令即可：</p>
<p>sudo apt-get install nodejs<br>sudo apt-get install npm<br> 引用评论：</p>
<p>使用apt-get 安装的nodejs版本过老，会导致安装hexo的时候出问题。<br>官方推荐的安装方法：<br>curl -sL <a href="https://deb.nodesource.com/setup_6.x" target="_blank" rel="external">https://deb.nodesource.com/setup_6.x</a> | sudo -E bash -<br>sudo apt-get install -y nodejs<br>Hexo安装</p>
<p>Hexo 是一个功能强大的静态网站生成系统，快速、简洁、高效。Hexo 支持 GitHub Flavored Markdown 的所有功能，甚至可以整合 Octopress 的大多数插件。可以一键部署到github，还有丰富的插件和主题,还支持热部署哦。执行如下命令进行安装。</p>
<p>sudo npm install hexo-cli -g</p>
<p>快速开始</p>
<p>安装Hexo安成后，使用如下命令快速新建一个博客系统，然后运行它：</p>
<p>hexo init blog<br>cd blog<br>npm install<br>hexo server<br>如果npm安装失败，请使用sudo安装。运行成功后，访问 <a href="http://0.0.0.0:4000/" target="_blank" rel="external">http://0.0.0.0:4000/</a> 就可以看到博客的样子的，对就是我现在的博客这个样子，o(∩∩)o…哈哈。</p>
<p>现在我们来看看Hexo 生成博客的目录结构：</p>
<p>.<br>├── _config<span class="class">.yml</span><br>├── db<span class="class">.json</span><br>├── node_modules<br>├──package<span class="class">.json</span><br>├──public<br>├── scaffolds<br>├── source<br>└── themes<br>其中_config.yml是配置站点的文件，public是hexo生成的静态站点文件夹，scaffolds是模板文件夹，source是存在用户资源的文件夹，themes是主题文件夹。</p>
<p>站点配置</p>
<p>找到title，subtitle，author参数配置，分别配置站点的标题、副标题和作者,比如我这里是：</p>
<p>然后配置站点的url和permalink，这两个分别是你的站点的url host地址以及文章的永久连接，我这里是：</p>
<p>url: <a href="http://www.flysnow.org" target="_blank" rel="external">http://www.flysnow.org</a><br>root:/<br>permalink::year/:month/:day/:title.html<br>permalink_defaults:<br>permalink 我配置的是年月日以及title，后缀是html，便于搜索收录。permalink详情参见： <a href="http://hexo.io/zh-cn/docs/permalinks.html" target="_blank" rel="external">http://hexo.io/zh-cn/docs/permalinks.html</a></p>
<p>新增一篇文章</p>
<p>使用如下命令即可新增一篇md格式的文章：</p>
<p>hexo new’github-page-with-hexo’<br>然后就会在sources/_posts生成一篇文件名为github-page-with-hexo.md的markdown文件。编辑该文件就可以写博客了。这里有一些Front-matter需要介绍，可以配置文章使用的模板、所属的分类和tag等。</p>
<p>Front-matter 是文件最上方以 —- 分隔的区域，用于指定个别文件的变量，举例来说：</p>
<p>请注意，目前的categories只能有一个一级分类，如果填写多个，第二个会被解析为二级分类，以及类推。tags可以允许有多个。更多关于Front-matter请参考 <a href="http://hexo.io/zh-cn/docs/front-matter.html" target="_blank" rel="external">http://hexo.io/zh-cn/docs/front-matter.html</a> 。</p>
<p>发布到github page</p>
<p>首先你已经创建好了你的github page对应的git库，没有创建的可以google相关博客。然后新建一个hexo分支，存放你现在hexo的所有文件。然后执行如下命令清理并生成发布的静态站点文件。</p>
<p>hexo clean<br>hexo generate<br>然后把生成的public目录下的文件放到你的master分支下即可。git commit后把这两个分支推送到你的github上。git库结构可以参见我的github page库 <a href="https://github.com/rujews/rujews.github.io" target="_blank" rel="external">https://github.com/rujews/rujews.github.io</a> 。</p>
<p>错误：<br>npm WARN enoent ENOENT: no such file or directory, open ‘/home/stormbaron/package.json’<br>npm安装文件会报错</p>
<p>####解决方法</p>
<p>####npm init<br>提示<br>This utility will walk you through creating a package.json file.<br>It only covers the most common items, and tries to guess sensible defaults.</p>
<p>See <code>npm help json</code> for definitive documentation on these fields<br>and exactly what they do.</p>
<p>Use <code>npm install &lt;pkg&gt; --save</code> afterwards to install a package and<br>save it as a dependency in the package.json file.</p>
<p>Press ^C at any time to quit.<br>name: (stormbaron) baronNpm<br>Sorry, name can no longer contain capital letters.<br>name: (stormbaron)<br>version: (1.0.0)<br>description: baronnpm<br>git repository: /home/stormbaron/work/npm<br>keywords:<br>author:<br>license: (ISC)<br>About to write to /home/stormbaron/package.json:</p>
<p>{<br>  “name”: “stormbaron”,<br>  “version”: “1.0.0”,<br>  “description”: “baronnpm”,<br>  “main”: “index.js”,<br>  “dependencies”: {},<br>  “devDependencies”: {},<br>  “scripts”: {<br>    “test”: “echo \”Error: no test specified\” &amp;&amp; exit 1”<br>  },<br>  “author”: “”,<br>  “license”: “ISC”,<br>  “repository”: {<br>    “type”: “git”,<br>    “url”: “/home/stormbaron/work/npm”<br>  }<br>}</p>
<p>Is this ok? (yes)<br>stormbaron@stormbaron-pc:~$ npm install</p>
<p>####在安装Hexo时报错<br>stormbaron@stormbaron-pc:~$ sudo npm install hexo-cli -g<br>/usr/bin/hexo -&gt; /usr/lib/node_modules/hexo-cli/bin/hexo</p>
<blockquote>
<p>dtrace-provider@0.8.3 install /usr/lib/node_modules/hexo-cli/node_modules/dtrace-provider<br>node scripts/install.js</p>
<p>hexo-util@0.6.0 postinstall /usr/lib/node_modules/hexo-cli/node_modules/hexo-util<br>npm run build:highlight</p>
</blockquote>
<p>npm ERR! path /root/.npm/_logs<br>npm ERR! code EACCES<br>npm ERR! errno -13<br>npm ERR! syscall scandir<br>npm ERR! Error: EACCES: permission denied, scandir ‘/root/.npm/_logs’<br>npm ERR!     at Error (native)<br>npm ERR!  { Error: EACCES: permission denied, scandir ‘/root/.npm/_logs’<br>npm ERR!     at Error (native)<br>npm ERR!   errno: -13,<br>npm ERR!   code: ‘EACCES’,<br>npm ERR!   syscall: ‘scandir’,<br>npm ERR!   path: ‘/root/.npm/_logs’ }<br>npm ERR!<br>npm ERR! Please try running this command again as root/Administrator.<br>glob error { Error: EACCES: permission denied, scandir ‘/root/.npm/_logs’<br>    at Error (native)<br>  errno: -13,<br>  code: ‘EACCES’,<br>  syscall: ‘scandir’,<br>  path: ‘/root/.npm/_logs’ }</p>
<blockquote>
<p>hexo-util@0.6.0 build:highlight /usr/lib/node_modules/hexo-cli/node_modules/hexo-util<br>node scripts/build_highlight_alias.js &gt; highlight_alias.json</p>
</blockquote>
<p>npm ERR! Callback called more than once.</p>
<p>┌───────────────────────────────────────────────────┐<br>│              npm update check failed              │<br>│        Try running with sudo or get access        │<br>│       to the local update config store via        │<br>│ sudo chown -R $USER:$(id -gn $USER) /root/.config │<br>└───────────────────────────────────────────────────┘</p>
<p>npm ERR! A complete log of this run can be found in:<br>npm ERR!     /root/.npm/_logs/2017-07-25T07_44_35_355Z-debug.log<br>/usr/lib<br>└── (empty)</p>
<p>npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.0.0 (node_modules/hexo-cli/node_modules/chokidar/node_modules/fsevents):<br>npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.1.2: wanted {“os”:”darwin”,”arch”:”any”} (current: {“os”:”linux”,”arch”:”x64”})<br>npm ERR! code ELIFECYCLE<br>npm ERR! errno 243<br>npm ERR! hexo-util@0.6.0 postinstall: <code>npm run build:highlight</code><br>npm ERR! Exit status 243<br>npm ERR!<br>npm ERR! Failed at the hexo-util@0.6.0 postinstall script ‘npm run build:highlight’.<br>npm ERR! Make sure you have the latest version of node.js and npm installed.<br>npm ERR! If you do, this is most likely a problem with the hexo-util package,<br>npm ERR! not with npm itself.<br>npm ERR! Tell the author that this fails on your system:<br>npm ERR!     npm run build:highlight<br>npm ERR! You can get information on how to open an issue for this project with:<br>npm ERR!     npm bugs hexo-util<br>npm ERR! Or if that isn’t available, you can get their info via:<br>npm ERR!     npm owner ls hexo-util<br>npm ERR! There is likely additional logging output above.</p>
<p>npm ERR! A complete log of this run can be found in:<br>npm ERR!     /root/.npm/_logs/2017-07-25T07_44_36_500Z-debug.log</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/icon.jpg"
               alt="Baronli" />
          <p class="site-author-name" itemprop="name">Baronli</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">51</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Baronli</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
